var elections;(function(n){var t=function(){function n(n,t){this.partyName=n;this.votes=t;this.mandatesByVotes=0;this.connected=!1;this.spareMandates=0;this.mandatesByConnection=0;this.votesToLoseMandate=0;this.missingVotesForOneMandate=0}return n.prototype.votesMethod=function(){return this.votes},n.prototype.totalMandates=function(){return this.mandatesByVotes+this.mandatesByConnection+this.spareMandates},n.prototype.votesPerMandate=function(){var n=this.totalMandates();return n>0?Math.round(this.votes/n):0},n}(),i,r,u;n.party=t;i=function(){function n(n,t){this.party1=n;this.party2=t;this.mandatesByVotes=0;this.party1.connected=!0;this.party2.connected=!0;this.spareMandates=0}return n.prototype.votesMethod=function(){return this.party1.votes+this.party2.votes},n}();n.partyConnection=i;r=function(){function n(){}return n}();n.calcResults=r;u=function(){function n(){}return n.prototype.calcAll=function(){var f=this.getParties(),s=this.calcMandates(f.parties,f.partyConnections),t,r,n,u,i;for(s.parties=f.parties,t=0;t<f.parties.length;t++)if(r=f.parties[t],r.aboveBlockPercent){var e=s.generalMeasure,o=e,h=0;do{if(n=this.getParties(),u=n.parties[t],u.votes-=e,this.calcMandates(n.parties,n.partyConnections),o<2)break;o=Math.floor(o/2);u.totalMandates()<r.totalMandates()?(h=e,e-=o):u.totalMandates()==r.totalMandates()&&(e+=o)}while(1);for(n=this.getParties(),u=n.parties[t],u.votes-=h,this.calcMandates(n.parties,n.partyConnections),r.votesToLoseMandate=h,i=0;i<n.parties.length;i++)if(i!=t&&f.parties[i].totalMandates()<n.parties[i].totalMandates()){r.partyEarningMandate=f.parties[i];break}}for(t=0;t<f.parties.length;t++)if(r=f.parties[t],r.aboveBlockPercent){var e=s.generalMeasure,o=e,c=0;do{if(n=this.getParties(),u=n.parties[t],u.votes+=e,this.calcMandates(n.parties,n.partyConnections),o<2)break;o=Math.floor(o/2);u.totalMandates()>r.totalMandates()?(c=e,e-=o):u.totalMandates()==r.totalMandates()&&(e+=o)}while(1);for(n=this.getParties(),u=n.parties[t],u.votes+=c,this.calcMandates(n.parties,n.partyConnections),r.missingVotesForOneMandate=c,i=0;i<n.parties.length;i++)if(i!=t&&f.parties[i].totalMandates()>n.parties[i].totalMandates()){r.partyLosingMandate=f.parties[i];break}}return s},n.prototype.calcMandates=function(n,t){for(var h,y,c,e,p,u,f,g,w,nt,l,s,b,it,rt,o,a=0,v,i=0;i<n.length;i++)f=n[i],a+=f.votes;for(v=Math.round(a*.02),h=0,i=0;i<n.length;i++)f=n[i],f.aboveBlockPercent=f.votes>=v,f.aboveBlockPercent&&(h+=f.votes);for(y=Math.round(h/120),c=0,i=0;i<n.length;i++)f=n[i],f.aboveBlockPercent&&(f.mandatesByVotes=Math.floor(f.votes/y),c+=f.mandatesByVotes);for(e=[],p=[],i=0;i<t.length;i++)u=t[i],u.party1.aboveBlockPercent&&u.party2.aboveBlockPercent?(u.mandatesByVotes=u.party1.mandatesByVotes+u.party2.mandatesByVotes,e.push(u),p.push(u)):(u.party1.connected=!1,u.party2.connected=!1);for(t=p,i=0;i<n.length;i++)f=n[i],!f.connected&&f.aboveBlockPercent&&e.push(f);for(g=120-c,i=0;i<g;i++){for(w=0,l=0;l<e.length;l++)s=e[l],b=s.votesMethod()/(s.mandatesByVotes+s.spareMandates+1),b>w&&(w=b,nt=s);nt.spareMandates++}for(i=0;i<t.length;i++){var u=t[i],tt=Math.floor(u.votesMethod()/(u.mandatesByVotes+u.spareMandates)),k=Math.floor(u.party1.votes/tt),d=Math.floor(u.party2.votes/tt);u.party1.mandatesByConnection=k-u.party1.mandatesByVotes;u.party2.mandatesByConnection=d-u.party2.mandatesByVotes;k+d<u.mandatesByVotes+u.spareMandates&&(it=u.party1.votes/(k+1),rt=u.party2.votes/(d+1),it>rt?u.party1.spareMandates=1:u.party2.spareMandates=1);e.splice(e.indexOf(u))}return o=new r,o.totalVotes=a,o.blockPercent=v,o.totalVotesAboveBlock=h,o.generalMeasure=y,o.totalMandatesByVotes=c,o},n.prototype.show=function(n){var i=this.calcAll(),u,r,t;for($(n).html(""),$(n).append("<table><tr><th>מפלגה<\/th><th>קולות<\/th><th>מנדטים מקולות<\/th><th>מנדטים מהסכמי עודפים<\/th><th>מנדטים מעודפים<\/th><th>סך הכל מנדטים<\/th><th>עלות מנדט<\/th><th>קולות לאיבוד מנדט<\/th><th>מרויחה מאיבוד מנדט<\/th><th>קולות לתוספת מנדט<\/th><th>מפסידה מרווח מנדט<\/th><\/tr>"),u=!1,r=0;r<i.parties.length;r++)t=i.parties[r],t.aboveBlockPercent||u||($(n).append("<tr><td>--------<\/td><td>--------<\/td><td>-------<\/td><td>------<\/td><td>-------<\/td><td>------<\/td><td>-------<\/td><td>------<\/td><td>-------<\/td><td>------<\/td><td>-------<\/td><\/tr>"),u=!0),$(n).append("<tr><td>"+t.partyName+"<\/td><td>"+t.votes+"<\/td><td>"+t.mandatesByVotes+"<\/td><td>"+t.mandatesByConnection+"<\/td><td>"+t.spareMandates+"<\/td><td>"+t.totalMandates()+"<\/td><td>"+t.votesPerMandate()+"<\/td><td>"+t.votesToLoseMandate+"<\/td><td>"+(t.partyEarningMandate!=null?t.partyEarningMandate.partyName:"---")+"<\/td><td>"+t.missingVotesForOneMandate+"<\/td><td>"+(t.partyLosingMandate!=null?t.partyLosingMandate.partyName:"---")+"<\/td><\/tr>");$(n).append("<\/table>");$(n).append("סך הכל קולות: "+i.totalVotes+"<br/>");$(n).append("אחוז החסימה: "+i.blockPercent+"<br/>");$(n).append("קולות מעל אחוז החסימה: "+i.totalVotesAboveBlock+"<br/>");$(n).append("מודד כללי: "+i.generalMeasure+"<br/>");$(n).append("מנדטים לפני חלוקת עודפים: "+i.totalMandatesByVotes+"<br/>")},n.prototype.getParties=function(){var n=new t("ליכוד ישראל ביתנו",884631),r=new t("יש עתיד",543280),u=new t("העבודה",432083),f=new t("הבית היהודי",345935),e=new t("שס",331800),o=new t("יהדות התורה",196038),s=new t("התנועה",189168),h=new t("מרצ",172382),y=new t("רעמ",138362),c=new t("חדש",113610),l=new t("בלד",96926),p=new t("קדימה",79487),w=new t("עוצמה לישראל",66840),a=new t("עם שלם",45691),b=new t("עלה ירוק",43725),k=new t("ארץ חדשה",28082),d=new t("כח להשפיע",28048),g=new t("הישראלים",18970),nt=new t("הירוקים והצעירים",8190),tt=new t("דור בוני הארץ",6027),it=new t("חיים בכבוד",3639),rt=new t("דעמ",3550),ut=new t("אחים אנחנו",2900),v=new t("צדק חברתי",2877),ft=new t("כולנו חברים",2179),et=new t("הפיראטים",2326),ot=new t("כלכלה",1972),st=new t("מתקדמת ליברלית",1568),ht=new t("אור",1027),ct=new t("ברית עולם",761),lt=new t("התקוה לשינוי",650),at=new t("מורשת אבות",461),vt=[n,r,u,f,e,o,s,h,y,c,l,p,w,a,b,k,d,g,nt,tt,it,rt,ut,v,ft,et,ot,st,ht,ct,lt,at],yt=[new i(u,r),new i(c,l),new i(n,f),new i(s,h),new i(e,o),new i(a,v)];return{parties:vt,partyConnections:yt}},n}();n.partiesView=u})(elections||(elections={}));window.onload=function(){var n=document.getElementById("content"),t=new elections.partiesView;t.show(n)};
/*
//# sourceMappingURL=elections.min.js.map
*/