<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="electionsApp">
<head>
    <title></title>
    <script src="Scripts/jquery-2.1.1.js"></script>
    <script src="Scripts/angular.js"></script>
    <script src="js/controllers.js"></script>
    <link rel="stylesheet" href="Content/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="Content/elections.css" type="text/css" />
</head>
<body ng-controller="ElectionsCtrl">
    <label>קולות:</label>
    <span>{{calcResults.totalVotes}}</span>
    <br />
    <label>אחוז החסימה:</label>
    <span>{{calcResults.blockPercent}}</span>
    <br />
    <label>קולות מעל אחוז החסימה:</label>
    <span>{{calcResults.totalVotesAboveBlock}}</span>
    <br />
    <label>מודד כללי:</label>
    <span>{{calcResults.generalMeasure}}</span>
    <br />
    <label>מנדטים לפני חלוקת עודפים:</label>
    <span>{{calcResults.totalMandatesByVotes}}</span>
    <br />
    <label>סה"כ מנדטים:</label>
    <span>{{calcResults.totalMandates}}</span>

    <table class="table table-striped table-hover table-bordered table-condensed">
        <thead>
            <tr>
                <th>מפלגה</th>
                <th>קולות</th>
                <th>מנדטים מקולות</th>
                <th>מנדטים מהסכמי עודפים</th>
                <th>מנדטים מעודפים</th>
                <th>סך הכל מנדטים</th>
                <th>עלות מנדט</th>
                <th>קולות לאיבוד מנדט</th>
                <th>מרויחה מאיבוד מנדט</th>
                <th>קולות לתוספת מנדט</th>
                <th>מפסידה מרווח מנדט</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="party in parties" ng-class="{danger : party.totalMandates() == 0, success : party.totalMandates() > 0}">
                <td>{{party.partyName}}</td>
                <td><input type="number" ng-model="party.votes" ng-change="calcAll()" ng-model-options="{ updateOn: 'blur' }" ng-keyup="cancel($event)" class="form-control" /></td>
                <td>{{party.mandatesByVotes}}</td>
                <td>{{party.mandatesByConnection}}</td>
                <td>{{party.spareMandates}}</td>
                <td>{{party.totalMandates()}}</td>
                <td>{{party.votesPerMandate()}}</td>
                <td>{{party.votesToLoseMandate}}</td>
                <td>{{party.partyEarningMandate.partyName}}</td>
                <td>{{party.missingVotesForOneMandate}}</td>
                <td>{{party.partyLosingMandate.partyName}}</td>
            </tr>
        </tbody>
    </table>
</body>
</html>
